{% extends 'base.html' %}

{% block title %} Tablero {% endblock %}

{% block style %}
  <link rel=stylesheet type=text/css href="{{ url_for('static', filename='css/board.css') }}">
{% endblock %}

{% block content %}
  {% if not location %}
    <div class="locations">
      {% for key, vals in ActivePatients.locations.items() %}
        <div onclick="window.location = `{{ url_for('board', location = key) }}`;">{{ vals['title'] }}</div>
      {% endfor %}
    </div>
  {% else %}
    <div class="board">
      <div class="icon"></div>
      <div class="title">{{ ActivePatients.locations[location]['title'] }}</div>
      <div class="time"></div>
      <div class="videos">Publicidad CV</div>
      <div id="patients"></div>
    </div>
  {% endif %}
{% endblock %}

{% block scripts %}
  {% if location %}
    <script src="{{ url_for('static', filename='js/socketio/socket.io.min.js') }}"></script>
    <script type="text/javascript">
      const patientLocation = '{{ location if location else "" }}';
      const patientStatus = {{ ActivePatients.locations[location]['status'] | safe }};
    </script>
    <script src="{{ url_for('static', filename='js/board.js') }}"></script>
  {% endif %}
{% endblock %}
